<!-- Chunk 89 | Source: 2011 iOS Human Interface Guidelines.pdf | Est. Tokens: 3102 -->
**If necessary, you can adjust relative, independent volume levels to produce the best mix in your app's audio output**. But the volume of the final audio output should always be governed by the system volume, whether it's adjusted by the volume buttons or a volume slider. This means that control over an application's audio output remains in users' hands, where it belongs.  
**Ensure that your app can display the audio route picker, if appropriate**. (An **audio route** is an electronic pathway for audio signals, such as from a device to headphone or from a device to speakers.) Even though people don't physically plug in or unplug a wireless audio device, they still expect to be able to choose a different audio route. To handle this, iOS automatically displays a control that allows users to pick an output audio route (use the MPVolumeView class to allow the control to display in your app). Because choosing a different audio route is a user-initiated action, users expect currently playing audio to continue without pause.  
**If you need to display a volume slider**, be sure to use the system-provided volume slider available when you use the MPVolumeView class. Note that when the currently active audio output device does not support volume control, the volume slider is replaced by the appropriate device name.  
**If your application produces only UI sound effects that are incidental to its functionality, use System Sound Services**. System Sound Servicesisthe iOS technology that produces alerts and UIsounds and invokes vibration; it is unsuitable for any other purpose. When you use System Sound Services to produce sound, you cannot influence how your audio interacts with audio on the device, or how it should respond to interruptions and changes in device configuration. For a sample project that demonstrates how to use this technology, see *Audio UI Sounds (SysSound)*.  
**If sound plays an important role in your app, use Audio Session Services** or the AVAudioSession class. These programming interfaces do not produce sound; instead, they help you express how your audio should interact with audio on the device and respond to interruptions and changes in device configuration.  
**iPhone:** No matter what technology you use to produce audio or how you define its behavior, the phone can always interrupt the currently running application. This is because no app should prevent people from receiving an incoming call.  
In Audio Session Services, the **audio session** functions as an intermediary for audio between your application and the system. One of the most important facets of the audio session is the **category**, which defines the audio behavior of your application.  
To realize the benefits of Audio Session Services and provide the audio experience users expect, you need to select the category that best describes the audio behavior of your application. This is the case whether your app plays only audio in the foreground or can also play audio in the background. Follow these guidelines as you make this selection:  
- **Select an audio session category based on its semantic meaning, not its precise set of behaviors**. By selecting a category whose purpose is clear, you ensure that your application behaves according to users' expectations. In addition, it gives your application the best chance of working properly if the exact set of behaviors is refined in the future.
- **In rare cases, add a property to the audio session to modify a category's standard behavior**. A category'sstandard behavior represents what most users expect,so you should consider carefully before you change that behavior. For example, you might add the ducking property to make sure your audio is louder than all other audio (except phone audio), if that's what users expect from your app. (To learn more about audio session properties, see "Fine-Tuning the Category" in *Audio Session Programming Guide*.)
- **Consider basing your category selection on the current audio environment of the device**. This might make sense if, for example, users can use your app while listening to other audio instead of to your soundtrack. If you do this, be sure to avoid forcing users to stop listening to their music or make an explicit soundtrack choice when your app starts.
- **In general, avoid changing categories while your application is running**. The primary reason for changing the category is if your app needs to support recording and playback at different times. In this case, it can be better to switch between the Record category and the Playback category as needed, than to select the Play and Record category. This is because selecting the Record category ensures that no alerts (such as an incoming text message alert) will sound while the recording is in progress.  
<span id="page-81-0"></span>Table 6-3 lists the audio session categories you can use. Different categories allow sounds to be silenced by the Ring/Silent or Silent switch (or device locking), to mix with other audio, or to play while the app is in the background. (For the actual category and property names as they appear in the programming interfaces, see *Audio Session Programming Guide*.)  
**Table 6-3** Audio session categories and their associated behaviors  
| Category     | Meaning                                                                 | Silenced | Mixes | In<br>Background |
|--------------|-------------------------------------------------------------------------|----------|-------|------------------|
| Solo Ambient | Sounds enhance app functionality, and<br>should silence other audio.    | Yes      | No    | No               |
| Ambient      | Sounds enhance app functionality but<br>should not silence other audio. | Yes      | Yes   | No               |  
| Category            | Meaning                                                                         | Silenced | Mixes                                                                  | In<br>Background |
|---------------------|---------------------------------------------------------------------------------|----------|------------------------------------------------------------------------|------------------|
| Playback            | Sounds are essential to app<br>functionality and might mix with other<br>audio. | No       | No (default)<br>Yes (when the Mix<br>With Others property<br>is added) | Yes              |
| Record              | Audio is user-recorded.                                                         | No       | No                                                                     | Yes              |
| Play and Record     | Sounds represent audio input and<br>output,sequentially orsimultaneously.       | No       | No (default)<br>Yes (when the Mix<br>With Others property<br>is added) | Yes              |
| Audio<br>Processing | App performs hardware-assisted audio<br>encoding (it does not play or record).  | N/A      | No                                                                     | Yes *            |  
<sup>\*</sup> If you select the Audio Processing category and you want to perform audio processing in the background, you need to prevent your app from suspending before you're finished with the audio processing. To learn how to do this, see "Executing Code in the Background" in *iOS Application Programming Guide*.  
Here are some scenarios that illustrate how to choose the audio session category that provides an audio experience users appreciate.  
#### **Scenario 1: An educational app that helps people learn a new language**. You provide:  
- Feedback sounds that play when users tap specific controls
- Recordings of words and phrases that play when users want to hear examples of correct pronunciation  
In this application, sound is essential to the primary functionality. People use this app to hear words and phrases in the language they're learning, so the sound should play even when the device locks or is switched to silent. Because users need to hear the sounds clearly, they expect other audio they might be playing to be silenced.  
To produce the audio experience users expect for this app, you would use the Playback category. Although this category can be refined to allow mixing with other audio, this app should use the default behavior to ensure that other audio does not compete with the educational content the user has explicitly chosen to hear.  
#### **Scenario 2: A Voice over Internet Protocol (VoIP) app**. You provide:  
- The ability to accept audio input
- The ability to play audio  
In this app, sound is essential to the primary functionality. People use this app to communicate with others, often while they're currently using a different application. Users expect to be able to receive calls when they've switched their device to silent or the device is locked, and they expect other audio to be silent for the duration of a call. They also expect to be able to receive and continue calls when the app is in the background.  
To produce the expected user experience for this app, you would use the Play and Record category. In addition, you would be sure to activate your audio session only when you need it so that users can use other audio between calls.  
#### **Scenario 3: A game that allows users to guide a character through different tasks**. You provide:  
- Various gameplay sound effects
- A musical soundtrack  
In this app, sound greatly enhances the user experience, but is not essential to the main task. Also, users are likely to appreciate being able to play the game silently or while listening to songs in their music library instead of to the game soundtrack.  
The best strategy is to find out if users are listening to other audio when your app starts. Don't ask users to choose whether they want to listen to other audio or listen to yoursoundtrack. Instead, use the Audio Session Services function AudioSessionGetProperty to query the state of the kAudioSessionProperty\_OtherAudioIsPlaying property. Based on the answer to this query, you can choose either the Ambient or Solo Ambient categories(both categories allow usersto play the game silently):  
- If users are listening to other audio, you should assume that they'd like to continue listening and would not appreciate being forced to listen to the game soundtrack instead. In this situation, have your app choose the Ambient category.
- If users are not listening to any other audio when your app starts, have your app choose the Solo Ambient category.  
#### **Scenario 4: An app that provides precise, real-time navigation instructions to the user's destination**. You provide:  
- Spoken directions for every step of the journey
- A few feedback sounds
- The ability for users to continue to listen to their own audio  
In this app, the spoken navigation instructions represent the primary task, regardless of whether the app is in the background. For this reason, you would use the Playback category, which allows your audio to play when the device is locked or switched to silent, and while the app is in the background.  
To allow people to listen to other audio while they use your app, you can add the kAudioSessionProperty\_OverrideCategoryMixWithOthers property. However, you also want to make sure that users can hear the spoken instructions above the audio they're currently playing. To do this, you can apply the kAudioSessionProperty\_OtherMixableAudioShouldDuck property to the audio session. This ensuresthat your audio islouder than all currently playing audio (except phone audio on iPhone).  
#### **Scenario 5: A blogging app that allows users to upload their text and graphics to a website**. You provide:  
- A short startup sound file
- Various short sound effects that accompany user actions (such as a sound that plays when a post has been uploaded)
- An alert sound that plays when a posting fails  
In this app, sound enhances the user experience, but it is incidental. The main task has nothing to do with audio and users do not need to hear any sounds to successfully use the app. In this scenario, you would use System Sound Services to produce sound. This is because the audio context of all sound in the app conforms to the intended purpose of this technology, which is to produce UI sound effects and alert sounds that obey device locking and the Ring/Silent (or Silent) switch in the way users expect.